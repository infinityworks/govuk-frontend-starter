{% extends "layouts/base.njk" %}

{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/radios/macro.njk" import govukRadios %}
{% from "govuk/components/table/macro.njk" import govukTable %}

{% block pageTitle %}
  Cookies – Apply for a juggling license – GOV.UK
{% endblock %}

{% block bodyStart %}{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <div id="cookies-notification">
        {% if notification %}
          {% include "partials/cookies-page/notification-banner.njk" %}
        {% endif %}
      </div>

      <div id="cookies-page-content">
        <h1 class="govuk-heading-l">Cookies</h1>

        <p class="govuk-body">
          Cookies are small files saved on your phone, tablet or computer when you visit a website.
        </p>

        <p class="govuk-body">
          We use cookies to make this site work and collect information about how you use our service.
        </p>

        <h2 class="govuk-heading-l">Essential cookies</h2>

      <p class="govuk-body">
        Essential cookies keep your information secure while you use this service. We do not need to ask permission to use them.
      </p>

      {{ govukTable({
        head: [
          {
            text: "Name"
          },
          {
            text: "Purpose"
          },
          {
            text: "Expires"
          }
        ],
        rows: [
          [
            {
              text: "session_cookie"
            },
            {
              text: "Used to keep you signed in"
            },
            {
              text: "20 hours"
            }
          ],
          [
            {
              text: "cookie_policy"
            },
            {
              text: "Saves your cookie consent settings"
            },
            {
              text: "1 year"
            }
          ]
        ]
      }) -}}

      <h2 class="govuk-heading-l">Analytics cookies (optional)</h2>

      <p class="govuk-body">
        With your permission, we use Google Analytics to collect data about how you use this service. This information helps us improve our service.
      </p>

      <p class="govuk-body">
        Google is not allowed to use or share our analytics data with anyone.
      </p>

      <p class="govuk-body">
        Google Analytics stores anonymised information about:
      </p>

      <ul class="govuk-list govuk-list--bullet">
        <li>
          how you got to this site
        </li>

        <li>
          the pages you visit on this site and how long you spend on them
        </li>

        <li>
          any errors you see while using this site
        </li>
      </ul>

      {{ govukTable({
        head: [
          {
            text: "Name"
          },
          {
            text: "Purpose"
          },
          {
            text: "Expires"
          }
        ],
        rows: [
          [
            {
              text: "_ga"
            },
            {
              text: "Used to distinguish users"
            },
            {
              text: "2 years"
            }
          ],
          [
            {
              text: "_ga_" + config.GOOGLE_TAG_ID
            },
            {
              text: "Used to persist session state"
            },
            {
              text: "2 years"
            }
          ]
        ]
      }) -}}

        <h2 class="govuk-heading-l">Change your cookie settings</h2>

        <form
          method="post"
          action="/cookies"
          hx-post="/cookies"
          hx-target="#cookies-notification"
          hx-swap="innerHTML"
        >
          {{ govukRadios({
            name: "analytics",
            value: "yes" if cookiePreferences.analytics else "no",
            idPrefix: "cookies-analytics",
            fieldset: {
              legend: {
                text: "Do you want to accept analytics cookies?",
                classes: "govuk-fieldset__legend--s"
              }
            },
            items: [
              {
                value: "yes",
                text: "Yes"
              },
              {
                value: "no",
                text: "No"
              }
            ]
          }) }}

          {{ govukButton({
            text: "Save cookie settings"
          }) }}
        </form>
      </div>
    </div>
  </div>
{% endblock %}

{% block bodyEnd %}
  {{ super() }}

  <script
    type="module"
    nonce="{{ cspNonce }}"
    src="/assets/scripts/modules/button.mjs?v={{ config.app.version }}"
  ></script>

  <script
    type="module"
    nonce="{{ cspNonce }}"
    src="/assets/scripts/modules/radios.mjs?v={{ config.app.version }}"
  ></script>
{% endblock %}
